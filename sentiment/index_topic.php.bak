<?php require_once('Connections/sentimentcn.php'); ?>
<?php
$maxRows_topicrs = 10;
$pageNum_topicrs = 0;
if (isset($HTTP_GET_VARS['pageNum_topicrs'])) {
  $pageNum_topicrs = $HTTP_GET_VARS['pageNum_topicrs'];
}
$startRow_topicrs = $pageNum_topicrs * $maxRows_topicrs;

$colname_topicrs = "1";
if (isset($HTTP_GET_VARS['Topic'])) {
  $colname_topicrs = (get_magic_quotes_gpc()) ? $HTTP_GET_VARS['Topic'] : addslashes($HTTP_GET_VARS['Topic']);
}
mysql_select_db($database_sentimentcn, $sentimentcn);
$query_topicrs = sprintf("SELECT * FROM profile WHERE Topic = '%s'", $colname_topicrs);
$query_limit_topicrs = sprintf("%s LIMIT %d, %d", $query_topicrs, $startRow_topicrs, $maxRows_topicrs);
$topicrs = mysql_query($query_limit_topicrs, $sentimentcn) or die(mysql_error());
$row_topicrs = mysql_fetch_assoc($topicrs);

if (isset($HTTP_GET_VARS['totalRows_topicrs'])) {
  $totalRows_topicrs = $HTTP_GET_VARS['totalRows_topicrs'];
} else {
  $all_topicrs = mysql_query($query_topicrs);
  $totalRows_topicrs = mysql_num_rows($all_topicrs);
}
$totalPages_topicrs = ceil($totalRows_topicrs/$maxRows_topicrs)-1;
?>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=big5">
<title>無標題文件</title>
</head>

<body>
<table width="95%" border="1">
  <tr bgcolor="#00FF00"> 
    <td>主題</td>
    <td>書名</td>
    <td>年級</td>
    <td>學生</td>
    <td>認證老師</td>
  </tr>
  <?php do { ?>
  <tr> 
    <td><?php echo $row_topicrs['Topic']; ?></td>
    <td><a href="detail.php?ID=<?php echo $row_topicrs['ID']; ?>"><?php echo $row_topicrs['Title']; ?></a></td>
    <td><?php echo $row_topicrs['Grade']; ?></td>
    <td><?php echo $row_topicrs['Student']; ?></td>
    <td><?php echo $row_topicrs['Teacher']; ?></td>
  </tr>
  <?php } while ($row_topicrs = mysql_fetch_assoc($topicrs)); ?>
</table>
<table width="95%" border="0">
  <tr>
    <td><?php if ($pageNum_topicrs > 0) { // Show if not first page ?>
      <div align="center">第一頁</div>
      <?php } // Show if not first page ?> </td>
    <td>
<?php if ($pageNum_topicrs > 0) { // Show if not first page ?>
      <div align="center">上一頁</div>
      <?php } // Show if not first page ?></td>
    <td>
<?php if ($pageNum_topicrs < $totalPages_topicrs) { // Show if not last page ?>
      <div align="center">下一頁</div>
      <?php } // Show if not last page ?></td>
    <td>
<?php if ($pageNum_topicrs < $totalPages_topicrs) { // Show if not last page ?>
      <div align="center">最終頁</div>
      <?php } // Show if not last page ?></td>
  </tr>
</table>
<p>&nbsp;</p>
</body>
</html>
<?php
mysql_free_result($topicrs);
?>

